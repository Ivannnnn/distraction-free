{"version":3,"file":"contentScripts/youtube.js","sources":["webpack:///webpack/bootstrap","webpack:///./src/contentScripts/utils.js","webpack:///./src/contentScripts/youtube.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/contentScripts/youtube.js\");\n","const renderStyles = (() => {\r\n  const style = document.createElement('style')\r\n  return css => {\r\n    style.innerHTML = css\r\n    if (!style.parentElement) document.head.appendChild(style)\r\n  }\r\n})()\r\n\r\nconst headReady = readyCb => {\r\n  const headCheck = mutations => {\r\n    for (let i = 0; i < mutations.length; i++) {\r\n      const $head = Array.from(mutations[i].addedNodes).find(\r\n        el => el.tagName === 'HEAD'\r\n      )\r\n\r\n      if ($head) {\r\n        mutationObserver.disconnect()\r\n        return readyCb()\r\n      }\r\n    }\r\n  }\r\n\r\n  const mutationObserver = new MutationObserver(headCheck)\r\n  mutationObserver.observe(document.documentElement, { childList: true })\r\n}\r\n\r\nconst currentPathname = () => new URL(window.location.href).pathname\r\n\r\nconst onUrlChange = (() => {\r\n  let pageLoaded = false\r\n  const subscribers = []\r\n\r\n  chrome.runtime.onMessage.addListener(() => {\r\n    pageLoaded ? subscribers.forEach(fn => fn()) : (pageLoaded = true)\r\n  })\r\n\r\n  return cb => subscribers.push(cb)\r\n})()\r\n\r\nconst randomBetween = (min, max) =>\r\n  Math.floor(Math.random() * (max - min + 1) + min)\r\n\r\nconst arrGetRandom = (arr, amount) => {\r\n  const min = 0\r\n  const max = arr.length - 1\r\n\r\n  if (amount > arr.length) {\r\n    throw new Error('Amount is bigger than array length.')\r\n  }\r\n\r\n  const result = {}\r\n\r\n  while (Object.keys(result).length < amount) {\r\n    const index = randomBetween(min, max)\r\n    if (!result[index]) result[index] = arr[index]\r\n  }\r\n  return Object.values(result).sort(() => 0.5 - Math.random())\r\n}\r\n\r\nconst appendHTML = (el, htmlStr) => {\r\n  const container = document.createElement('div')\r\n  container.innerHTML = htmlStr\r\n  el.appendChild(container.firstElementChild)\r\n}\r\n\r\nconst observe = (el, cb, options = { childList: true }) => {\r\n  const func = mutations => cb(mutations) === false && mo.disconnect()\r\n  const mo = new MutationObserver(func)\r\n  mo.observe(el, options)\r\n}\r\n\r\nconst $ = s => Array.from(document.querySelectorAll(s))\r\n\r\nmodule.exports = {\r\n  renderStyles,\r\n  headReady,\r\n  currentPathname,\r\n  onUrlChange,\r\n  arrGetRandom,\r\n  appendHTML,\r\n  $,\r\n  observe\r\n}\r\n","const { renderStyles, headReady } = require('./utils')\r\n\r\nconst rules = {\r\n  recommended: `\r\n  ytd-two-column-browse-results-renderer[page-subtype=home] { display:none !important; }\r\n  `,\r\n  up_next: `ytd-watch-next-secondary-results-renderer { display: none !important; }`,\r\n  related: `.videowall-endscreen { display: none !important }`,\r\n  comments: `#watch-discussion, #comments { display: none; }`,\r\n  ads: `#player-ads { display:none !important; }`\r\n}\r\n\r\n//\r\n// sidebar ads maybe\r\nlet options = {\r\n  recommended: false,\r\n  up_next: false,\r\n  related: false,\r\n  comments: false,\r\n  ads: false\r\n}\r\n\r\nconst hideAll = () => {\r\n  return Object.keys(options)\r\n    .map(key => rules[key])\r\n    .join('\\n')\r\n}\r\n\r\nconst showAll = () => ''\r\n\r\nconst activeOptionsToCSS = () => {\r\n  return Object.keys(options)\r\n    .filter(key => options[key])\r\n    .map(key => rules[key])\r\n    .join('\\n')\r\n}\r\n\r\n//\r\n// options updated\r\nchrome.storage.onChanged.addListener(changes => {\r\n  changes.options.newValue.youtube &&\r\n    Object.assign(options, changes.options.newValue.youtube)\r\n  renderStyles(activeOptionsToCSS())\r\n})\r\n\r\n//\r\n// url change\r\nchrome.runtime.onMessage.addListener(() => {\r\n  renderStyles(activeOptionsToCSS())\r\n})\r\n\r\n//\r\n// head is inserted & ready to get styles\r\nheadReady(() => {\r\n  renderStyles(hideAll())\r\n  chrome.storage.sync.get('options', data => {\r\n    data.options.youtube && Object.assign(options, data.options.youtube)\r\n    renderStyles(activeOptionsToCSS())\r\n  })\r\n})\r\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}